<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Capital Quiz â€” Î ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎµÏ‚</title>
<style>
  :root{
    --bg:#0f1020; --card:#181a2e; --text:#eef1ff; --muted:#b9c0ff; --accent:#6ea8fe; --accent2:#a1e3a1; --wrong:#ff7b7b; --right:#6ef2a7; --shadow:rgba(0,0,0,.35);
  }
  [data-theme="light"]{
    --bg:#f7f8ff; --card:#ffffff; --text:#151735; --muted:#5c629e; --accent:#3b6cff; --accent2:#198754; --wrong:#dc3545; --right:#0aa06e; --shadow:rgba(0,0,0,.12);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    background:radial-gradient(1200px 600px at 80% -20%, rgba(110,168,254,.15), transparent), var(--bg);
    color:var(--text); display:flex; align-items:center; justify-content:center; padding:24px;
  }
  .app{width:min(920px,100%); }
  header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px}
  .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px}
  .brand .logo{width:36px; height:36px; border-radius:10px; background:
    conic-gradient(from 120deg, var(--accent), var(--accent2), var(--accent));
    box-shadow:0 6px 18px var(--shadow);
  }
  .card{
    background:var(--card); border-radius:16px; box-shadow:0 10px 30px var(--shadow);
    padding:18px; border:1px solid rgba(255,255,255,.06);
  }
  .row{display:flex; gap:16px; flex-wrap:wrap}
  .controls{display:flex; gap:10px; flex-wrap:wrap}
  .pill{
    background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.15);
    padding:10px 14px; border-radius:999px; cursor:pointer; transition:.2s;
  }
  .pill[aria-pressed="true"], .pill:hover{border-color:var(--accent); box-shadow:0 0 0 3px rgba(110,168,254,.15)}
  .switch{display:inline-flex; align-items:center; gap:8px}
  .switch input{accent-color:var(--accent)}
  .stats{display:flex; gap:14px; flex-wrap:wrap; color:var(--muted); font-weight:600}
  .stats b{color:var(--text)}
  main{margin-top:16px}
  .question{font-size:1.25rem; font-weight:800; margin:8px 0 14px}
  .options{display:grid; grid-template-columns:1fr; gap:10px}
  @media (min-width:680px){ .options{grid-template-columns:1fr 1fr} }
  .btn{
    background:#11142a; color:var(--text); border:1px solid rgba(255,255,255,.12);
    padding:14px; border-radius:12px; cursor:pointer; text-align:left; font-weight:700; transition:.15s;
  }
  .btn:hover{transform:translateY(-1px); border-color:var(--accent)}
  .btn.correct{background:rgba(13,110,253,.08); border-color:var(--right); outline:2px solid rgba(110,242,167,.35)}
  .btn.wrong{background:rgba(220,53,69,.08); border-color:var(--wrong); outline:2px solid rgba(220,53,69,.25)}
  .footer{display:flex; justify-content:space-between; align-items:center; margin-top:12px; color:var(--muted)}
  .primary{
    background:linear-gradient(90deg, var(--accent), #9b7bff);
    color:#fff; border:none; padding:12px 16px; border-radius:12px; font-weight:800; cursor:pointer; box-shadow:0 10px 22px var(--shadow);
  }
  .ghost{background:transparent; border:1px solid rgba(255,255,255,.15); color:var(--text); padding:10px 14px; border-radius:10px; cursor:pointer;}
  .timer{height:10px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; margin:10px 0 0}
  .timer>div{height:100%; width:100%; background:linear-gradient(90deg, var(--accent), var(--wrong)); transition:width .2s linear}
  .muted{color:var(--muted)}
  .end h2{margin:8px 0}
  .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; background:rgba(255,255,255,.08); padding:2px 6px; border-radius:6px; border:1px solid rgba(255,255,255,.15)}
</style>
</head>
<body data-theme="dark">
  <div class="app">
    <header>
      <div class="brand"><div class="logo" aria-hidden="true"></div><div>Capital Quiz</div></div>
      <div class="controls">
        <button class="pill" id="easyBtn" aria-pressed="true">Î•ÏÎºÎ¿Î»Î¿</button>
        <button class="pill" id="medBtn" aria-pressed="false">ÎœÎµÏƒÎ±Î¯Î¿</button>
        <button class="pill" id="hardBtn" aria-pressed="false">Î”ÏÏƒÎºÎ¿Î»Î¿</button>
        <label class="switch pill" title="Î§ÏÎ¿Î½ÏŒÎ¼ÎµÏ„ÏÎ¿ 15s">
          <input type="checkbox" id="timerToggle" /> Î§ÏÎ¿Î½ÏŒÎ¼ÎµÏ„ÏÎ¿ 15s
        </label>
        <button class="pill" id="themeBtn" title="Î•Î½Î±Î»Î»Î±Î³Î® Î¸Î­Î¼Î±Ï„Î¿Ï‚ (L/D)">ğŸŒ“ Î˜Î­Î¼Î±</button>
      </div>
    </header>

    <section class="card">
      <div class="row stats" id="stats">
        <div>Î•ÏÏÏ„Î·ÏƒÎ·: <b id="qNum">1</b>/10</div>
        <div>Î£ÎºÎ¿Ï: <b id="score">0</b></div>
        <div>Streak: <b id="streak">0</b></div>
        <div>ÎšÎ±Î»ÏÏ„ÎµÏÎ¿: <b id="best">0</b></div>
        <div id="modeLabel" class="muted">Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±: Î•ÏÎºÎ¿Î»Î¿</div>
      </div>

      <main id="game">
        <div class="question" id="question">Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Ï„Î·Ï‚ â€¦;</div>
        <div class="options" id="options"></div>
        <div class="timer" id="timer" style="display:none"><div id="timerFill"></div></div>
        <div class="footer">
          <div class="muted">Î¥Ï€ÏŒÎ´ÎµÎ¹Î¾Î·: <span class="kbd">1</span>â€“<span class="kbd">4</span> Î³Î¹Î± ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚, <span class="kbd">N</span> ÎµÏ€ÏŒÎ¼ÎµÎ½Î·</div>
          <div>
            <button class="ghost" id="skipBtn" title="Î§Ï‰ÏÎ¯Ï‚ Î±Ï€ÏÎ»ÎµÎ¹Î± ÏƒÎºÎ¿Ï">Î Î±ÏÎ¬Î»ÎµÎ¹ÏˆÎ·</button>
            <button class="primary" id="nextBtn" disabled>Î•Ï€ÏŒÎ¼ÎµÎ½Î·</button>
          </div>
        </div>
      </main>

      <section class="end" id="end" style="display:none">
        <h2>Î“ÏÏÎ¿Ï‚ Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ!</h2>
        <p>Î£ÎºÎ¿Ï: <b id="finalScore">0</b> | Î£Ï‰ÏƒÏ„Î¬: <b id="finalCorrect">0</b>/10 | ÎœÎ­Î³Î¹ÏƒÏ„Î¿ streak: <b id="finalStreak">0</b></p>
        <p class="muted" id="feedback"></p>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px">
          <button class="primary" id="playAgainBtn">Î Î±Î¯Î¾Îµ Î¾Î±Î½Î¬</button>
          <button class="ghost" id="reviewBtn">Î‘Î½Î±ÏƒÎºÏŒÏ€Î·ÏƒÎ· ÎµÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½</button>
        </div>
        <div id="review" style="margin-top:12px; display:none"></div>
      </section>
    </section>

    <p class="muted" style="margin-top:10px">
      Made with â¤ï¸ Î³Î¹Î± ÎµÎ¾Î¬ÏƒÎºÎ·ÏƒÎ· ÏƒÏ„Î· Î³ÎµÏ‰Î³ÏÎ±Ï†Î¯Î±. Î˜Î­Î»ÎµÎ¹Ï‚ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎ¿Ï…Î¼Îµ Î®Ï€ÎµÎ¹ÏÎ¿/Ï‡Î¬ÏÏ„ÎµÏ‚/Î®Ï‡Î¿Ï…Ï‚; Î ÎµÏ‚ Î¼Î¿Ï…!
    </p>
  </div>

<script>
/** ===== Dataset =====
  ÎšÎ¬Î¸Îµ Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿: {country, capital, continent, tag}
  tag: 'easy' (Î³Î½Ï‰ÏƒÏ„Î­Ï‚), 'med' (Î¼Î­Ï„ÏÎ¹ÎµÏ‚), 'hard' (Î´ÏÏƒÎºÎ¿Î»ÎµÏ‚/Ï€Î±Î³Î¯Î´ÎµÏ‚)
**/
const DATA = [
  // Europe â€” easy
  {country:"Î•Î»Î»Î¬Î´Î±", capital:"Î‘Î¸Î®Î½Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î™Ï„Î±Î»Î¯Î±", capital:"Î¡ÏÎ¼Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î“Î±Î»Î»Î¯Î±", capital:"Î Î±ÏÎ¯ÏƒÎ¹", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î™ÏƒÏ€Î±Î½Î¯Î±", capital:"ÎœÎ±Î´ÏÎ¯Ï„Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î“ÎµÏÎ¼Î±Î½Î¯Î±", capital:"Î’ÎµÏÎ¿Î»Î¯Î½Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î—Î½Ï‰Î¼Î­Î½Î¿ Î’Î±ÏƒÎ¯Î»ÎµÎ¹Î¿", capital:"Î›Î¿Î½Î´Î¯Î½Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î Î¿ÏÏ„Î¿Î³Î±Î»Î¯Î±", capital:"Î›Î¹ÏƒÎ±Î²ÏŒÎ½Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"ÎŸÎ»Î»Î±Î½Î´Î¯Î±", capital:"Î†Î¼ÏƒÏ„ÎµÏÎ½Ï„Î±Î¼", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î’Î­Î»Î³Î¹Î¿", capital:"Î’ÏÏ…Î¾Î­Î»Î»ÎµÏ‚", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î‘Ï…ÏƒÏ„ÏÎ¯Î±", capital:"Î’Î¹Î­Î½Î½Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î•Î»Î²ÎµÏ„Î¯Î±", capital:"Î’Î­ÏÎ½Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î£Î¿Ï…Î·Î´Î¯Î±", capital:"Î£Ï„Î¿ÎºÏ‡ÏŒÎ»Î¼Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"ÎÎ¿ÏÎ²Î·Î³Î¯Î±", capital:"ÎŒÏƒÎ»Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î”Î±Î½Î¯Î±", capital:"ÎšÎ¿Ï€ÎµÎ³Ï‡Î¬Î³Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î™ÏÎ»Î±Î½Î´Î¯Î±", capital:"Î”Î¿Ï…Î²Î»Î¯Î½Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î Î¿Î»Ï‰Î½Î¯Î±", capital:"Î’Î±ÏÏƒÎ¿Î²Î¯Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î¤ÏƒÎµÏ‡Î¯Î±", capital:"Î ÏÎ¬Î³Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"ÎŸÏ…Î³Î³Î±ÏÎ¯Î±", capital:"Î’Î¿Ï…Î´Î±Ï€Î­ÏƒÏ„Î·", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î¡Î¿Ï…Î¼Î±Î½Î¯Î±", capital:"Î’Î¿Ï…ÎºÎ¿Ï…ÏÎ­ÏƒÏ„Î¹", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î’Î¿Ï…Î»Î³Î±ÏÎ¯Î±", capital:"Î£ÏŒÏ†Î¹Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î£ÎµÏÎ²Î¯Î±", capital:"Î’ÎµÎ»Î¹Î³ÏÎ¬Î´Î¹", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"ÎšÏÎ¿Î±Ï„Î¯Î±", capital:"Î–Î¬Î³ÎºÏÎµÎ¼Ï€", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î£Î»Î¿Î²ÎµÎ½Î¯Î±", capital:"Î›Î¹Î¿Ï…Î¼Ï€Î»Î¹Î¬Î½Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î£Î»Î¿Î²Î±ÎºÎ¯Î±", capital:"ÎœÏ€ÏÎ±Ï„Î¹ÏƒÎ»Î¬Î²Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î›Î¹Î¸Î¿Ï…Î±Î½Î¯Î±", capital:"Î’Î¯Î»Î½Î¹Î¿Ï…Ï‚", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î›ÎµÏ„Î¿Î½Î¯Î±", capital:"Î¡Î¯Î³Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î•ÏƒÎ¸Î¿Î½Î¯Î±", capital:"Î¤Î¬Î»Î¹Î½", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î¦Î¹Î½Î»Î±Î½Î´Î¯Î±", capital:"Î•Î»ÏƒÎ¯Î½ÎºÎ¹", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î™ÏƒÎ»Î±Î½Î´Î¯Î±", capital:"Î¡Î­Ï…ÎºÎ¹Î±Î²Î¹Îº", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"ÎŸÏ…ÎºÏÎ±Î½Î¯Î±", capital:"ÎšÎ¯ÎµÎ²Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î›ÎµÏ…ÎºÎ¿ÏÏ‰ÏƒÎ¯Î±", capital:"ÎœÎ¹Î½ÏƒÎº", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"ÎœÎ¿Î»Î´Î±Î²Î¯Î±", capital:"ÎšÎ¹ÏƒÎ¹Î½Î¬Î¿Ï…", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"ÎœÎ±Ï…ÏÎ¿Î²Î¿ÏÎ½Î¹Î¿", capital:"Î Î¿Î½Ï„Î³ÎºÏŒÏÎ¹Ï„ÏƒÎ±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"Î’ÏŒÏÎµÎ¹Î± ÎœÎ±ÎºÎµÎ´Î¿Î½Î¯Î±", capital:"Î£ÎºÏŒÏ€Î¹Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î‘Î»Î²Î±Î½Î¯Î±", capital:"Î¤Î¯ÏÎ±Î½Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î’Î¿ÏƒÎ½Î¯Î± ÎºÎ±Î¹ Î•ÏÎ¶ÎµÎ³Î¿Î²Î¯Î½Î·", capital:"Î£Î±ÏÎ¬Î³ÎµÎ²Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"Î›Î¿Ï…Î¾ÎµÎ¼Î²Î¿ÏÏÎ³Î¿", capital:"Î›Î¿Ï…Î¾ÎµÎ¼Î²Î¿ÏÏÎ³Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"ÎœÎ¬Î»Ï„Î±", capital:"Î’Î±Î»Î­Ï„Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"med"},
  {country:"ÎšÏÏ€ÏÎ¿Ï‚", capital:"Î›ÎµÏ…ÎºÏ‰ÏƒÎ¯Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"easy"},
  {country:"Î‘Î½Î´ÏŒÏÎ±", capital:"Î‘Î½Î´ÏŒÏÎ± Î»Î± Î’Î­Î³Î¹Î±", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"ÎœÎ¿Î½Î±ÎºÏŒ", capital:"ÎœÎ¿Î½Î±ÎºÏŒ", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"Î›Î¯Ï‡Ï„ÎµÎ½ÏƒÏ„Î±ÏŠÎ½", capital:"Î’Î±Î½Ï„Î¿ÏÎ¶", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},
  {country:"Î£Î±Î½ ÎœÎ±ÏÎ¯Î½Î¿", capital:"Î£Î±Î½ ÎœÎ±ÏÎ¯Î½Î¿", continent:"Î•Ï…ÏÏÏ€Î·", tag:"hard"},

  // Americas
  {country:"Î—Î Î‘", capital:"ÎŸÏ…Î¬ÏƒÎ¹Î³ÎºÏ„Î¿Î½", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"easy"},
  {country:"ÎšÎ±Î½Î±Î´Î¬Ï‚", capital:"ÎŸÏ„Ï„Î¬Î²Î±", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"easy"},
  {country:"ÎœÎµÎ¾Î¹ÎºÏŒ", capital:"Î ÏŒÎ»Î· Ï„Î¿Ï… ÎœÎµÎ¾Î¹ÎºÎ¿Ï", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"easy"},
  {country:"Î’ÏÎ±Î¶Î¹Î»Î¯Î±", capital:"ÎœÏ€ÏÎ±Î¶Î¯Î»Î¹Î±", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î‘ÏÎ³ÎµÎ½Ï„Î¹Î½Î®", capital:"ÎœÏ€Î¿Ï…Î­Î½Î¿Ï‚ Î†Î¹ÏÎµÏ‚", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"easy"},
  {country:"Î§Î¹Î»Î®", capital:"Î£Î±Î½Ï„Î¹Î¬Î³Î¿", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î ÎµÏÎ¿Ï", capital:"Î›Î¯Î¼Î±", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"ÎšÎ¿Î»Î¿Î¼Î²Î¯Î±", capital:"ÎœÏ€Î¿Î³ÎºÎ¿Ï„Î¬", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î’ÎµÎ½ÎµÎ¶Î¿Ï…Î­Î»Î±", capital:"ÎšÎ±ÏÎ¬ÎºÎ±Ï‚", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î’Î¿Î»Î¹Î²Î¯Î±", capital:"Î£Î¿ÏÎºÏÎµ", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"hard"}, // (ÏƒÏ…Î½Ï„Î±Î³Î¼. Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Î›Î± Î Î±Î¶ â€” ÎµÎºÏ„ÎµÎ»ÎµÏƒÏ„Î¹ÎºÎ®)
  {country:"Î Î±ÏÎ±Î³Î¿Ï…Î¬Î·", capital:"Î‘ÏƒÎ¿Ï…Î½ÏƒÎ¹ÏŒÎ½", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"ÎŸÏ…ÏÎ¿Ï…Î³Î¿Ï…Î¬Î·", capital:"ÎœÎ¿Î½Ï„ÎµÎ²Î¹Î´Î­Î¿", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î™ÏƒÎ·Î¼ÎµÏÎ¹Î½ÏŒÏ‚", capital:"ÎšÎ¯Ï„Î¿", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"ÎšÎ¿ÏÎ²Î±", capital:"Î‘Î²Î¬Î½Î±", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î”Î¿Î¼Î¹Î½Î¹ÎºÎ±Î½Î® Î”Î·Î¼Î¿ÎºÏÎ±Ï„Î¯Î±", capital:"Î†Î³Î¹Î¿Ï‚ Î”Î¿Î¼Î¯Î½Î¹ÎºÎ¿Ï‚", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î Î±Î½Î±Î¼Î¬Ï‚", capital:"Î ÏŒÎ»Î· Ï„Î¿Ï… Î Î±Î½Î±Î¼Î¬", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"ÎšÏŒÏƒÏ„Î± Î¡Î¯ÎºÎ±", capital:"Î£Î±Î½ Î§Î¿ÏƒÎ­", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î“Î¿Ï…Î±Ï„ÎµÎ¼Î¬Î»Î±", capital:"Î ÏŒÎ»Î· Ï„Î·Ï‚ Î“Î¿Ï…Î±Ï„ÎµÎ¼Î¬Î»Î±", continent:"Î‘Î¼ÎµÏÎ¹ÎºÎ®", tag:"hard"},

  // Africa
  {country:"Î‘Î¯Î³Ï…Ï€Ï„Î¿Ï‚", capital:"ÎšÎ¬Î¹ÏÎ¿", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"easy"},
  {country:"ÎÏŒÏ„Î¹Î± Î‘Ï†ÏÎ¹ÎºÎ®", capital:"Î ÏÎµÏ„ÏŒÏÎ¹Î±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"}, // (Î½Î¿Î¼Î¿Î¸ÎµÏ„Î¹ÎºÎ®: ÎšÎ­Î¹Ï€ Î¤Î¬Î¿Ï…Î½)
  {country:"ÎÎ¹Î³Î·ÏÎ¯Î±", capital:"Î‘Î¼Ï€Î¿ÏÏ„Î¶Î±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î‘Î¹Î¸Î¹Î¿Ï€Î¯Î±", capital:"Î‘Î½Ï„Î¯Ï‚ Î‘Î¼Ï€Î­Î¼Ï€Î±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"med"},
  {country:"ÎšÎ­Î½Ï…Î±", capital:"ÎÎ±ÏŠÏÏŒÎ¼Ï€Î¹", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"med"},
  {country:"ÎœÎ±ÏÏŒÎºÎ¿", capital:"Î¡Î±Î¼Ï€Î¬Ï„", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î‘Î»Î³ÎµÏÎ¯Î±", capital:"Î‘Î»Î³Î­ÏÎ¹", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î¤Ï…Î½Î·ÏƒÎ¯Î±", capital:"Î¤ÏÎ½Î¹Î´Î±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"med"},
  {country:"Î“ÎºÎ¬Î½Î±", capital:"Î†ÎºÏÎ±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î£ÎµÎ½ÎµÎ³Î¬Î»Î·", capital:"ÎÏ„Î±ÎºÎ¬Ï", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î‘ÎºÏ„Î® Î•Î»ÎµÏ†Î±Î½Ï„Î¿ÏƒÏ„Î¿Ï", capital:"Î“Î¹Î±Î¼Î¿Ï…ÏƒÎ¿Ï…ÎºÏÏŒ", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î¤Î±Î½Î¶Î±Î½Î¯Î±", capital:"ÎÏ„Î¿Î½Ï„ÏŒÎ¼Î±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"}, // (Î½Ï„Îµ Ï†Î¬ÎºÏ„Î¿ ÎÏ„Î±Ï ÎµÏ‚ Î£Î±Î»Î¬Î¼)
  {country:"Î‘Î³ÎºÏŒÎ»Î±", capital:"Î›Î¿Ï…Î¬Î½Ï„Î±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î–Î¹Î¼Ï€Î¬Î¼Ï€Î¿Ï…Îµ", capital:"Î§Î±ÏÎ¬ÏÎµ", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},
  {country:"Î–Î¬Î¼Ï€Î¹Î±", capital:"Î›Î¿Ï…ÏƒÎ¬ÎºÎ±", continent:"Î‘Ï†ÏÎ¹ÎºÎ®", tag:"hard"},

  // Asia
  {country:"Î™Î±Ï€Ï‰Î½Î¯Î±", capital:"Î¤ÏŒÎºÎ¹Î¿", continent:"Î‘ÏƒÎ¯Î±", tag:"easy"},
  {country:"ÎšÎ¯Î½Î±", capital:"Î ÎµÎºÎ¯Î½Î¿", continent:"Î‘ÏƒÎ¯Î±", tag:"easy"},
  {country:"ÎÏŒÏ„Î¹Î± ÎšÎ¿ÏÎ­Î±", capital:"Î£ÎµÎ¿ÏÎ»", continent:"Î‘ÏƒÎ¯Î±", tag:"easy"},
  {country:"Î™Î½Î´Î¯Î±", capital:"ÎÎ­Î¿ Î”ÎµÎ»Ï‡Î¯", continent:"Î‘ÏƒÎ¯Î±", tag:"easy"},
  {country:"Î Î±ÎºÎ¹ÏƒÏ„Î¬Î½", capital:"Î™ÏƒÎ»Î±Î¼Î±Î¼Ï€Î¬Î½Ï„", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"ÎœÏ€Î±Î³ÎºÎ»Î±Î½Ï„Î­Ï‚", capital:"ÎÏ„Î¬ÎºÎ±", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"Î™Î½Î´Î¿Î½Î·ÏƒÎ¯Î±", capital:"Î¤Î¶Î±ÎºÎ¬ÏÏ„Î±", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"Î¦Î¹Î»Î¹Ï€Ï€Î¯Î½ÎµÏ‚", capital:"ÎœÎ±Î½Î¯Î»Î±", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"Î¤Î±ÏŠÎ»Î¬Î½Î´Î·", capital:"ÎœÏ€Î±Î½Î³ÎºÏŒÎº", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"ÎœÎ±Î»Î±Î¹ÏƒÎ¯Î±", capital:"ÎšÎ¿Ï…Î¬Î»Î± Î›Î¿Ï…Î¼Ï€Î¿ÏÏ", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"Î£Î¹Î³ÎºÎ±Ï€Î¿ÏÏÎ·", capital:"Î£Î¹Î³ÎºÎ±Ï€Î¿ÏÏÎ·", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"Î’Î¹ÎµÏ„Î½Î¬Î¼", capital:"Î‘Î½ÏŒÎ¹", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"ÎšÎ±Î¶Î±ÎºÏƒÏ„Î¬Î½", capital:"Î‘ÏƒÏ„Î¬Î½Î±", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"Î£Î±Î¿Ï…Î´Î¹ÎºÎ® Î‘ÏÎ±Î²Î¯Î±", capital:"Î¡Î¹Î¬Î½Ï„", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"Î™ÏÎ¬Î½", capital:"Î¤ÎµÏ‡ÎµÏÎ¬Î½Î·", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"Î™ÏÎ¬Îº", capital:"Î’Î±Î³Î´Î¬Ï„Î·", continent:"Î‘ÏƒÎ¯Î±", tag:"med"},
  {country:"Î£Ï…ÏÎ¯Î±", capital:"Î”Î±Î¼Î±ÏƒÎºÏŒÏ‚", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"Î™Î¿ÏÎ´Î±Î½Î¯Î±", capital:"Î‘Î¼Î¼Î¬Î½", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"Î™ÏƒÏÎ±Î®Î»", capital:"Î™ÎµÏÎ¿Ï…ÏƒÎ±Î»Î®Î¼", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"ÎœÎ¿Î³Î³Î¿Î»Î¯Î±", capital:"ÎŸÏ…Î»Î¬Î½ ÎœÏ€Î±Ï„ÏŒÏ", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"ÎÎµÏ€Î¬Î»", capital:"ÎšÎ±Ï„Î¼Î±Î½Ï„Î¿Ï", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"},
  {country:"Î£ÏÎ¹ Î›Î¬Î½ÎºÎ±", capital:"Î£ÏÎ¹ Î¤Î¶Î±Î³Î¹Î±Î³Î¿Ï…Î±ÏÎ½Ï„ÎµÎ½ÎµÏ€Î¿ÏÏÎ± ÎšÏŒÏ„Îµ", continent:"Î‘ÏƒÎ¯Î±", tag:"hard"}, // Î½Ï„Îµ Ï†Î¬ÎºÏ„Î¿ ÎšÎ¿Î»ÏŒÎ¼Ï€Î¿

  // Oceania
  {country:"Î‘Ï…ÏƒÏ„ÏÎ±Î»Î¯Î±", capital:"ÎšÎ±Î¼Ï€Î­ÏÎ±", continent:"Î©ÎºÎµÎ±Î½Î¯Î±", tag:"med"},
  {country:"ÎÎ­Î± Î–Î·Î»Î±Î½Î´Î¯Î±", capital:"ÎŸÏ…Î­Î»Î»Î¹Î½Î³ÎºÏ„Î¿Î½", continent:"Î©ÎºÎµÎ±Î½Î¯Î±", tag:"med"},
  {country:"Î¦Î¯Ï„Î¶Î¹", capital:"Î£Î¿ÏÎ²Î±", continent:"Î©ÎºÎµÎ±Î½Î¯Î±", tag:"hard"},
  {country:"Î Î±Ï€Î¿ÏÎ± ÎÎ­Î± Î“Î¿Ï…Î¹Î½Î­Î±", capital:"Î Î¿ÏÏ„ ÎœÏŒÏÎµÏƒÎ¼Ï€Î¹", continent:"Î©ÎºÎµÎ±Î½Î¯Î±", tag:"hard"}
];

// --- State ---
const ROUND_LENGTH = 10;
let mode = 'easy'; // 'easy' | 'med' | 'hard'
let withTimer = false;
let current = 0, score = 0, streak = 0, best = Number(localStorage.getItem('capitalQuizBest')||0);
let maxStreak = 0, answered = false;
let history = []; // Î³Î¹Î± Î±Î½Î±ÏƒÎºÏŒÏ€Î·ÏƒÎ·
let timerId=null, timeLeftMs=15000;

// --- Elements ---
const qNumEl = document.getElementById('qNum');
const scoreEl = document.getElementById('score');
const streakEl = document.getElementById('streak');
const bestEl = document.getElementById('best'); bestEl.textContent = best;
const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const nextBtn = document.getElementById('nextBtn');
const skipBtn = document.getElementById('skipBtn');
const timerWrap = document.getElementById('timer');
const timerFill = document.getElementById('timerFill');
const endSec = document.getElementById('end');
const gameSec = document.getElementById('game');
const finalScore = document.getElementById('finalScore');
const finalCorrect = document.getElementById('finalCorrect');
const finalStreak = document.getElementById('finalStreak');
const feedback = document.getElementById('feedback');
const reviewBtn = document.getElementById('reviewBtn');
const reviewBox = document.getElementById('review');
const playAgainBtn = document.getElementById('playAgainBtn');
const modeLabel = document.getElementById('modeLabel');
const easyBtn = document.getElementById('easyBtn'), medBtn = document.getElementById('medBtn'), hardBtn = document.getElementById('hardBtn');
const timerToggle = document.getElementById('timerToggle');
const themeBtn = document.getElementById('themeBtn');

// --- Helpers ---
const rand = (n)=>Math.floor(Math.random()*n);
function sample(arr, k, forbid=null){
  const out=[]; const used=new Set(forbid? [forbid]:[]);
  while(out.length<k && used.size<arr.length){
    const i=rand(arr.length); const key = arr[i].capital;
    if(used.has(key)) continue; used.add(key); out.push(arr[i]);
  }
  return out;
}
function pickQuestion(set){
  // Ï€ÏÎ¿Ï„Î¯Î¼Î·ÏƒÎµ Î¯Î´Î¹oÎ± Î®Ï€ÎµÎ¹ÏÎ¿ Î³Î¹Î± Ï€Î±ÏÎ±Ï€Î»Î±Î½Î·Ï„Î¹ÎºÎ­Ï‚ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚
  const item = set[rand(set.length)];
  const sameCont = set.filter(x=>x.continent===item.continent && x.capital!==item.capital);
  const pool = sameCont.length>=3 ? sameCont : set.filter(x=>x.capital!==item.capital);
  const wrongs = sample(pool, 3, item.capital).map(x=>x.capital);
  const opts = [...wrongs, item.capital].sort(()=>Math.random()-.5);
  return {country:item.country, capital:item.capital, options:opts, continent:item.continent};
}
function modeFilter(mode){
  if(mode==='easy') return DATA.filter(x=>x.tag!=='hard' && (x.continent==='Î•Ï…ÏÏÏ€Î·' || ['Î—Î Î‘','ÎšÎ±Î½Î±Î´Î¬Ï‚','Î‘Ï…ÏƒÏ„ÏÎ±Î»Î¯Î±','Î™Î±Ï€Ï‰Î½Î¯Î±'].includes(x.country)));
  if(mode==='med')  return DATA.filter(x=>x.tag!=='hard');
  return DATA.slice(); // hard = ÏŒÎ»Î±
}
function setMode(newMode){
  mode=newMode;
  easyBtn.setAttribute('aria-pressed', String(mode==='easy'));
  medBtn.setAttribute('aria-pressed', String(mode==='med'));
  hardBtn.setAttribute('aria-pressed', String(mode==='hard'));
  modeLabel.textContent = 'Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±: ' + (mode==='easy'?'Î•ÏÎºÎ¿Î»Î¿':mode==='med'?'ÎœÎµÏƒÎ±Î¯Î¿':'Î”ÏÏƒÎºÎ¿Î»Î¿');
  resetGame();
}
function resetGame(){
  current=0; score=0; streak=0; maxStreak=0; history=[];
  scoreEl.textContent=score; streakEl.textContent=streak; qNumEl.textContent=current+1;
  endSec.style.display='none'; gameSec.style.display='block'; nextBtn.disabled=true;
  loadQuestion();
}
function loadQuestion(){
  clearTimer();
  optionsEl.innerHTML='';
  const set = modeFilter(mode);
  const q = pickQuestion(set);
  questionEl.textContent = `Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· Ï€ÏÏ‰Ï„ÎµÏÎ¿Ï…ÏƒÎ± Ï„Î·Ï‚ ${q.country};`;
  const opts = q.options;
  opts.forEach((cap, idx)=>{
    const btn=document.createElement('button');
    btn.className='btn';
    btn.textContent= `${idx+1}. ${cap}`;
    btn.dataset.correct = String(cap===q.capital);
    btn.addEventListener('click', ()=>choose(btn, q));
    optionsEl.appendChild(btn);
  });
  answered=false; nextBtn.disabled=true;
  skipBtn.disabled=false;
  if(withTimer){
    timeLeftMs=15000;
    timerWrap.style.display='block';
    timerFill.style.width='100%';
    timerId=setInterval(()=>{
      timeLeftMs -= 200;
      const pct=Math.max(0, timeLeftMs/15000)*100;
      timerFill.style.width = pct+'%';
      if(timeLeftMs<=0){ clearTimer(); autoReveal(q); }
    },200);
  }else{
    timerWrap.style.display='none';
  }
}
function clearTimer(){ if(timerId){ clearInterval(timerId); timerId=null; } }
function autoReveal(q){
  if(answered) return;
  answered=true; nextBtn.disabled=false; skipBtn.disabled=true;
  // Î¼Î±ÏÎºÎ¬ÏÎ¹Î½Îµ ÏƒÏ‰ÏƒÏ„Î®
  [...optionsEl.children].forEach(btn=>{
    if(btn.dataset.correct==='true'){ btn.classList.add('correct'); btn.setAttribute('aria-label','Î£Ï‰ÏƒÏ„Î®'); }
    btn.disabled=true;
  });
  history.push({q:questionEl.textContent, correct:q.capital, picked:null});
}
function choose(btn, q){
  if(answered) return;
  answered=true; nextBtn.disabled=false; skipBtn.disabled=true; clearTimer();
  const ok = btn.dataset.correct==='true';
  if(ok){ btn.classList.add('correct'); score+=10; streak++; maxStreak=Math.max(maxStreak,streak); }
  else{
    btn.classList.add('wrong');
    // Î´ÎµÎ¯Î¾Îµ ÎºÎ±Î¹ Ï„Î· ÏƒÏ‰ÏƒÏ„Î®
    const correctBtn=[...optionsEl.children].find(b=>b.dataset.correct==='true');
    if(correctBtn) correctBtn.classList.add('correct');
    streak=0;
  }
  scoreEl.textContent=score; streakEl.textContent=streak;
  // ÎºÎ»ÎµÎ¯Î´Ï‰ÏƒÎµ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚
  [...optionsEl.children].forEach(b=>b.disabled=true);
  history.push({q:questionEl.textContent, correct:q.capital, picked: btn.textContent.replace(/^\d+\.\s/,'')});
}
function next(){
  if(!answered) return;
  current++;
  if(current>=ROUND_LENGTH) return finish();
  qNumEl.textContent=current+1;
  loadQuestion();
}
function finish(){
  gameSec.style.display='none'; endSec.style.display='block';
  finalScore.textContent=score;
  const correctCount = history.filter(x=>x.picked===x.correct || x.picked===null).length; // autoReveal counts as wrong pick shown as null
  finalCorrect.textContent=correctCount;
  finalStreak.textContent=maxStreak;
  if(score>best){ best=score; localStorage.setItem('capitalQuizBest', String(best)); bestEl.textContent=best; }
  const msg = score>=80 ? "Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ® Î´Î¿Ï…Î»ÎµÎ¹Î¬ â€” ÎµÎ¯ÏƒÎ±Î¹ ÏƒÎµ top Ï†ÏŒÏÎ¼Î±!":
              score>=60 ? "Î Î¿Î»Ï ÎºÎ±Î»ÏŒÏ‚â€” Î¼Îµ Î»Î¯Î³Î· ÎµÎ¾Î¬ÏƒÎºÎ·ÏƒÎ· Ï€Î±Ï‚ ÎºÎ¿ÏÏ…Ï†Î®." :
              score>=30 ? "ÎšÎ±Î»Î® Î±ÏÏ‡Î®! Î£Ï…Î½Î­Ï‡Î¹ÏƒÎµ Î³Î¹Î± Î½Î± ÎºÎ»ÎµÎ¹Î´ÏÏƒÎµÎ¹Ï‚ Ï„Î¹Ï‚ Î´ÏÏƒÎºÎ¿Î»ÎµÏ‚." :
                          "ÎšÎ±Î½Î­Î½Î± Î¬Î³Ï‡Î¿Ï‚â€”Ï€Î¬Î¼Îµ Î¬Î»Î»Î· Î¼Î¯Î± ÏƒÏ„Î¿Î½ Â«Î•ÏÎºÎ¿Î»Î¿Â» ÎºÎ±Î¹ Ï‡Ï„Î¯Î¶Î¿Ï…Î¼Îµ.";
  feedback.textContent = msg;
  // ÎµÏ„Î¿Î¯Î¼Î±ÏƒÎµ Î±Î½Î±ÏƒÎºÏŒÏ€Î·ÏƒÎ·
  reviewBox.style.display='none'; reviewBox.innerHTML = history.map((h,i)=>{
    const picked = h.picked ?? 'â€”';
    const ok = (picked===h.correct);
    return `<div style="padding:8px 10px; border:1px solid rgba(255,255,255,.12); border-radius:10px; margin-top:8px">
      <div style="font-weight:800">Q${i+1}. ${h.q}</div>
      <div>Î— ÏƒÏ‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·: <b>${h.correct}</b></div>
      <div>Î— ÎµÏ€Î¹Î»Î¿Î³Î® ÏƒÎ¿Ï…: <b style="color:${ok?'var(--right)':'var(--wrong)'}">${picked}</b></div>
    </div>`;
  }).join('');
}

// --- Events ---
nextBtn.addEventListener('click', next);
skipBtn.addEventListener('click', ()=>{
  if(answered) return;
  answered=true; nextBtn.disabled=false; skipBtn.disabled=true; clearTimer();
  // Î‘Î½ Ï€Î±ÏÎ¬Î»ÎµÎ¹ÏˆÎ·, Î¼Î±ÏÎºÎ¬ÏÎ¹Î½Îµ ÏƒÏ‰ÏƒÏ„Î® Ï‡Ï‰ÏÎ¯Ï‚ Ï€Î¿Î¹Î½Î®/Î¼Ï€ÏŒÎ½Î¿Ï…Ï‚
  [...optionsEl.children].forEach(btn=>{
    if(btn.dataset.correct==='true'){ btn.classList.add('correct'); }
    btn.disabled=true;
  });
  streak=0; streakEl.textContent=streak;
  history.push({q:questionEl.textContent, correct:[...optionsEl.children].find(b=>b.dataset.correct==='true').textContent.replace(/^\d+\.\s/,''), picked:'â€” (Ï€Î±ÏÎ¬Î»ÎµÎ¹ÏˆÎ·)'});
});
playAgainBtn.addEventListener('click', resetGame);
reviewBtn.addEventListener('click', ()=>{ reviewBox.style.display = reviewBox.style.display==='none'?'block':'none'; });

easyBtn.addEventListener('click', ()=>setMode('easy'));
medBtn.addEventListener('click', ()=>setMode('med'));
hardBtn.addEventListener('click', ()=>setMode('hard'));
timerToggle.addEventListener('change', (e)=>{ withTimer = e.target.checked; resetGame(); });

// Keyboard shortcuts
window.addEventListener('keydown', (e)=>{
  if(['1','2','3','4'].includes(e.key) && !answered){
    const idx = Number(e.key)-1;
    const btn = optionsEl.children[idx];
    if(btn) btn.click();
  }else if(e.key.toLowerCase()==='n'){
    if(endSec.style.display==='block') resetGame();
    else next();
  }
});

// Theme toggle + persist
(function(){
  const saved = localStorage.getItem('capitalQuizTheme');
  if(saved) document.body.setAttribute('data-theme', saved);
})();
themeBtn.addEventListener('click', ()=>{
  const cur = document.body.getAttribute('data-theme');
  const next = cur==='light' ? 'dark' : 'light';
  document.body.setAttribute('data-theme', next);
  localStorage.setItem('capitalQuizTheme', next);
});

// Init
resetGame();
</script>
</body>
</html>
